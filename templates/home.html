<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Forest Fire Weather Index Predictor</title>
    <!-- Load Tailwind CSS -->
    <script src="https://cdn.tailwindcss.com"></script>
    <style>
        /* Custom scrollbar for better aesthetics */
        ::-webkit-scrollbar {
            width: 8px;
        }
        ::-webkit-scrollbar-thumb {
            background-color: #f87171; /* Red-400 */
            border-radius: 4px;
        }
        body {
            font-family: 'Inter', sans-serif;
            background-color: #f7f7f7;
        }
        .input-group {
            transition: all 0.2s;
        }
        .input-group:focus-within {
            box-shadow: 0 0 0 2px #dc2626; /* Red-600 ring */
        }
        .card-shadow {
            box-shadow: 0 10px 20px rgba(0, 0, 0, 0.08);
        }
    </style>
</head>
<body class="min-h-screen flex flex-col items-center p-4">
    <div class="w-full max-w-4xl bg-white p-8 md:p-10 rounded-xl card-shadow space-y-8 border-t-4 border-red-700">
        
        <!-- Header Section -->
        <header class="text-center">
            <h1 class="text-4xl md:text-5xl font-extrabold text-red-700 mb-2">
                ðŸ”¥ FWI Prediction Tool
            </h1>
            <p class="text-gray-600 text-lg">Predicting Forest Fire Intensity using ML</p>
        </header>

        <!-- Project Context / Explanation Section -->
        <section class="p-6 bg-red-50 rounded-xl border border-red-200">
            <h2 class="text-2xl font-bold text-red-700 mb-3">Project Context: FWI Index</h2>
            <p class="text-gray-700">
                This tool uses a trained Ridge Regression Model to estimate the Fire Weather Index (FWI). Please input the required meteorological and fuel moisture codes below for an accurate forecast.
            </p>
        </section>

        <!-- Prediction Form -->
        <section>
            <h2 class="text-2xl font-bold text-gray-800 mb-4 border-b pb-2">Enter Meteorological Data</h2>
            
            <form action="{{ url_for('predict_datapoint') }}" method="post" class="grid grid-cols-1 md:grid-cols-2 gap-6">

                <!-- Temperature -->
                <div class="input-group bg-gray-50 p-4 rounded-lg">
                    <label for="Temperature" class="block text-sm font-medium text-gray-700 mb-1">Temperature (Â°C)</label>
                    <input type="number" step="any" class="w-full p-2 border border-gray-300 rounded-md focus:outline-none focus:border-red-600" 
                           id="Temperature" name="Temperature" placeholder="e.g., 29.5" required>
                    <p class="text-xs text-gray-500 mt-1">Daily maximum air temperature.</p>
                </div>

                <!-- Relative Humidity (RH) -->
                <div class="input-group bg-gray-50 p-4 rounded-lg">
                    <label for="RH" class="block text-sm font-medium text-gray-700 mb-1">Relative Humidity (RH, %)</label>
                    <input type="number" step="any" class="w-full p-2 border border-gray-300 rounded-md focus:outline-none focus:border-red-600" 
                           id="RH" name="RH" placeholder="e.g., 55.0" required>
                    <p class="text-xs text-gray-500 mt-1">Noon relative humidity.</p>
                </div>

                <!-- Wind Speed (Ws) -->
                <div class="input-group bg-gray-50 p-4 rounded-lg">
                    <label for="Ws" class="block text-sm font-medium text-gray-700 mb-1">Wind Speed (Ws, km/h)</label>
                    <input type="number" step="any" class="w-full p-2 border border-gray-300 rounded-md focus:outline-none focus:border-red-600" 
                           id="Ws" name="Ws" placeholder="e.g., 14.0" required>
                    <p class="text-xs text-gray-500 mt-1">Noon wind speed.</p>
                </div>

                <!-- Rain (Rain) -->
                <div class="input-group bg-gray-50 p-4 rounded-lg">
                    <label for="Rain" class="block text-sm font-medium text-gray-700 mb-1">Rain (mm)</label>
                    <input type="number" step="any" class="w-full p-2 border border-gray-300 rounded-md focus:outline-none focus:border-red-600" 
                           id="Rain" name="Rain" placeholder="e.g., 0.0 (for no rain)" required>
                    <p class="text-xs text-gray-500 mt-1">24-hour accumulated rainfall.</p>
                </div>

                <!-- Fine Fuel Moisture Code (FFMC) -->
                <div class="input-group bg-gray-50 p-4 rounded-lg">
                    <label for="FFMC" class="block text-sm font-medium text-gray-700 mb-1">Fine Fuel Moisture Code (FFMC)</label>
                    <input type="number" step="any" class="w-full p-2 border border-gray-300 rounded-md focus:outline-none focus:border-red-600" 
                           id="FFMC" name="FFMC" placeholder="e.g., 85.1" required>
                    <p class="text-xs text-gray-500 mt-1">Moisture content of fine fuels (high value = dry fuel).</p>
                </div>

                <!-- Duff Moisture Code (DMC) -->
                <div class="input-group bg-gray-50 p-4 rounded-lg">
                    <label for="DMC" class="block text-sm font-medium text-gray-700 mb-1">Duff Moisture Code (DMC)</label>
                    <input type="number" step="any" class="w-full p-2 border border-gray-300 rounded-md focus:outline-none focus:border-red-600" 
                           id="DMC" name="DMC" placeholder="e.g., 18.3" required>
                    <p class="text-xs text-gray-500 mt-1">Moisture content of moderate dead organic matter.</p>
                </div>

                <!-- Initial Spread Index (ISI) -->
                <div class="input-group bg-gray-50 p-4 rounded-lg">
                    <label for="ISI" class="block text-sm font-medium text-gray-700 mb-1">Initial Spread Index (ISI)</label>
                    <input type="number" step="any" class="w-full p-2 border border-gray-300 rounded-md focus:outline-none focus:border-red-600" 
                           id="ISI" name="ISI" placeholder="e.g., 6.5" required>
                    <p class="text-xs text-gray-500 mt-1">Rate of fire spread (based on FFMC and Ws).</p>
                </div>

                <!-- Region -->
                <div class="input-group bg-gray-50 p-4 rounded-lg">
                    <label for="Region" class="block text-sm font-medium text-gray-700 mb-1">Region (0 or 1)</label>
                    <select id="Region" name="Region" required 
                            class="w-full p-2 border border-gray-300 rounded-md focus:outline-none focus:border-red-600 bg-white">
                        <option value="" disabled selected>Select Region</option>
                        <option value="0">Region 0 (e.g., Bejaia)</option>
                        <option value="1">Region 1 (e.g., Sidi Bel-AbbÃ¨s)</option>
                    </select>
                    <p class="text-xs text-gray-500 mt-1">A binary encoded region feature, consistent with the model.</p>
                </div>

                <!-- Predict Button - spanning both columns on desktop -->
                <div class="md:col-span-2 pt-4">
                    <button type="submit" 
                            class="w-full bg-red-700 hover:bg-red-800 text-white font-bold py-4 rounded-full shadow-xl transition duration-150 ease-in-out transform hover:scale-[1.01] ring-4 ring-red-300">
                        Calculate FWI
                    </button>
                </div>
            </form>
        </section>

        <!-- Results Section -->
        {% if results is not none %}
        <section class="mt-8 space-y-4">
            {% if fwi_result is not none %}
            <div class="bg-red-50 border-l-4 border-red-600 text-gray-800 p-6 rounded-lg" role="alert">
                <h2 class="text-2xl font-bold mb-2 text-red-700">Prediction Result</h2>
                <p class="text-5xl font-extrabold flex items-center">
                    FWI Score: 
                    <span class="ml-4 text-red-600">{{ fwi_result | float | default(0) | round(2) }}</span>
                </p>
            </div>
            {% else %}
            <!-- Display Error/Message -->
            <div class="bg-yellow-100 border-l-4 border-yellow-500 text-yellow-800 p-6 rounded-lg" role="alert">
                <h2 class="text-2xl font-bold mb-2">Server Message</h2>
                <p class="text-lg">{{ results }}</p>
            </div>
            {% endif %}
            
            <!-- FWI Danger Scale -->
            <div class="p-6 bg-gray-50 rounded-xl border border-gray-200">
                <h3 class="text-xl font-semibold mb-3 text-gray-700">FWI Interpretation Scale</h3>
                <div class="grid grid-cols-5 text-center text-xs md:text-sm font-medium">
                    <div class="p-2 rounded-l-lg bg-green-200 text-green-800 border-r-2 border-white">0-5 (Low)</div>
                    <div class="p-2 bg-yellow-200 text-yellow-800 border-r-2 border-white">6-11 (Moderate)</div>
                    <div class="p-2 bg-orange-200 text-orange-800 border-r-2 border-white">12-18 (High)</div>
                    <div class="p-2 bg-red-300 text-red-800 border-r-2 border-white">19-30 (Very High)</div>
                    <div class="p-2 rounded-r-lg bg-red-500 text-white">30+ (Extreme)</div>
                </div>
            </div>
        </section>
        {% endif %}

    </div>
</body>
</html>